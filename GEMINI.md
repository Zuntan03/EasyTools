# EasyTools プロジェクト (Linux移植版)

## プロジェクト概要

このプロジェクトの目的は、既存のWindows用バッチスクリプト群「EasyTools」を、**Linux (Ubuntu 24.04 LTS) 環境で動作するようにシェルスクリプトへ移植する**ことです。

オリジナルのEasyToolsは、AI関連ツールや開発ツール（ComfyUI, Lama Cleaner等）のセットアップ、アップデート、モデルダウンロードなどを自動化するWindowsバッチファイル群です。本プロジェクトでは、これらの機能をLinuxユーザーが利用できるように、同等の機能をシェルスクリプトで実現します。

## 言語ポリシー
- 本リポジトリのドキュメントおよび各種コメントは、全て日本語で記載してください。
- プルリクエストの説明・レビューコメントも日本語で統一します。
- 特別な理由がない限り、日本語で応答してください。

## 移植の基本方針

- **スクリプト言語:** Windowsバッチファイル (`.bat`) をBashシェルスクリプト (`.sh`) に置き換えます。
- **互換性:** Ubuntu 24.04 LTSでの動作を第一目標とします。
- **依存関係の管理:** Windowsのポータブル環境構築（Portable Git/Python）の思想は引き継ぎつつ、Linuxの標準的なパッケージ管理（`apt`）や仮想環境（`venv`）の利用を基本とします。
- **コマンドの置換:** Windows固有のコマンド (`chcp`, `where`, `reg`, `PowerShell`) は、Linuxの同等コマンド (`export LANG`, `which`, `command -v`, `sed`, `awk`, `grep`など) に置き換えます。
- **パスの解決:** Windows形式のパス (`%~dp0`, `%USERPROFILE%`) は、Linux形式 (`$(dirname "$0")`, `$HOME`) に変換します。
- **インタフェースの維持:** Windowsバッチファイルの入出力インタフェースをBashシェルスクリプトでも完全に維持します。

## 主な機能（移植対象）

- **環境構築:**
    - `apt`を利用したGit, Python等のインストール。
    - Pythonの仮想環境 (`venv`) の構築と有効化。
- **リポジトリ管理:**
    - 指定したGitHubリポジトリのクローンまたはプル。
- **ダウンローダー:**
    - `curl`や`aria2c`を使用したファイルダウンロード（Hugging Faceからのモデルダウンロードを含む）。
- **アプリケーション管理:**
    - ComfyUI, Lama Cleaner等のインストール、アップデート、および関連Pythonパッケージの管理。

## 移植作業の進め方

EasyToolsの主要な機能のLinuxへの移植は、大部分が完了しています。以下に完了した主な項目と、今後の課題を記します。

### 完了した主な移植作業

1.  **ファイル構成のLinux化:**
    - ほぼ全ての `.bat` ファイルに対応する `.sh` ファイルを作成しました。
2.  **インストーラーテンプレート:**
    - `InstallerTemplate.sh` を作成し、Linux環境での基本的な処理フローを実装しました。
3.  **コア機能の移植:**
    - **Git関連:** `Git/` ディレクトリ内の全てのスクリプト (`git_clone_or_pull.sh` など) を移植しました。
    - **Python関連:** `Python/` ディレクトリ内の仮想環境有効化機能 (`python_activate.sh`) を移植しました。
    - **ダウンロード関連:** `Download/` ディレクトリ内の `aria2c` や `curl` を利用したダウンロード機能 (`aria.sh`, `hugging_face.sh` など) を移植しました。
    - **ファイルシステム関連:** `Link/` ディレクトリ内のシンボリックリンク作成機能 (`junction.sh` など) を移植しました。
4.  **アプリケーション管理スクリプトの移植:**
    - **ComfyUi:** セットアップ、アップデート関連のスクリプトを移植しました。
    - **LamaCleaner:** セットアップ、アップデート、有効化に関するスクリプトを移植しました。
    - **Mosaic:** アップデート、有効化に関するスクリプトを移植しました。
    - **SdImageDiet:** アップデート、有効化に関するスクリプトを移植しました。
    - **LlamaCpp:** アップデートスクリプトを移植しました。
    - **Ffmpeg:** 動画編集関連の各種スクリプトを移植しました。
    - **Civitai:** APIキー設定、モデルダウンロード機能のスクリプトを移植しました。
    - **その他:** `GenImageViewer`, `InfiniteImageBrowsing` のアップデータも移植済みです。

### 今後の課題

- **未移植スクリプトの移植:**
    - `LlamaCppServer.bat`
    - `InfiniteImageBrowsingTemplate.bat`
    - `Bat/` ディレクトリ内のスクリプト（必要に応じて）
- **起動スクリプトの作成:**
    - `Mosaic.bat` や `SdImageDiet.bat` など、各アプリケーションを直接起動するためのトップレベルの `.sh` スクリプトを作成する必要があります。
- **動作テストとデバッグ:**
    - 移植した各スクリプトが、Ubuntu 24.04 LTS環境で実際に意図通りに動作するか、詳細なテストが必要です。
- **ドキュメントの更新:**
    - `README.md` をLinux版の内容に合わせて更新し、使い方を明確にする必要があります。

## 新しい開発規約 (Linux版)

- **Shebang:** すべてのシェルスクリプトの1行目には `#!/bin/bash` を記述します。
- **実行権限:** 作成した `.sh` ファイルには実行権限 (`chmod +x`) を付与します。
- **変数:** 変数定義は `VAR="VALUE"` の形式で行い、参照時はダブルクォートで囲みます (`"$VAR"`)。
- **エラーハンドリング:** コマンドの実行後には `if [ $? -ne 0 ]; then ... fi` の形式でエラーチェックを適切に行います。
- **可読性:** コメントを活用し、複雑な処理にはその意図を明記します。
- **コミット時のコメント:** co-authored-byを付与する。ユーザー名はGemini CLIの場合は「gemini-cli」、Codex CLIの場合は「codex-cli」とする。メールアドレスは「dummy@example.com」とする。

## タスク分割方針

- 巨大なタスクを作ることは避けて、小さなタスクに分割して作業を行う。
- タスクごとにブランチを作成する。
- ある程度の作業単位の完了段階で都度コミットする。
- タスクの完了時にプッシュ及びプルリクエストの作成を行う。



